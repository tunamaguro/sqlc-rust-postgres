//! Code generated by sqlc. SHOULD NOT EDIT.
//! sqlc version: v1.28.0
//! sqlc-rust-postgres version: v0.1.4
pub const COUNT_PILOTS: &str = r#"-- name: CountPilots :one
SELECT COUNT(*) FROM pilots"#;
#[derive(Debug, Clone)]
pub struct CountPilotsRow {
    pub count: i64,
}
impl CountPilotsRow {
    pub(crate) fn from_row(row: &postgres::Row) -> Result<Self, postgres::Error> {
        Ok(CountPilotsRow {
            count: row.try_get(0)?,
        })
    }
}
pub fn count_pilots(
    client: &mut impl postgres::GenericClient,
) -> Result<Option<CountPilotsRow>, postgres::Error> {
    let query_struct = CountPilots {};
    query_struct.query_opt(client)
}
#[derive(Debug)]
pub struct CountPilots {}
impl CountPilots {
    pub const QUERY: &'static str = r#"-- name: CountPilots :one
SELECT COUNT(*) FROM pilots"#;
}
impl CountPilots {
    pub fn query_one(
        &self,
        client: &mut impl postgres::GenericClient,
    ) -> Result<CountPilotsRow, postgres::Error> {
        let row = client.query_one(Self::QUERY, &[])?;
        CountPilotsRow::from_row(&row)
    }
    pub fn query_opt(
        &self,
        client: &mut impl postgres::GenericClient,
    ) -> Result<Option<CountPilotsRow>, postgres::Error> {
        let row = client.query_opt(Self::QUERY, &[])?;
        match row {
            Some(ref row) => Ok(Some(CountPilotsRow::from_row(row)?)),
            None => Ok(None),
        }
    }
}
pub const LIST_PILOTS: &str = r#"-- name: ListPilots :many
SELECT id, name FROM pilots LIMIT 5"#;
#[derive(Debug, Clone)]
pub struct ListPilotsRow {
    pub id: i32,
    pub name: String,
}
impl ListPilotsRow {
    pub(crate) fn from_row(row: &postgres::Row) -> Result<Self, postgres::Error> {
        Ok(ListPilotsRow {
            id: row.try_get(0)?,
            name: row.try_get(1)?,
        })
    }
}
pub fn list_pilots(
    client: &mut impl postgres::GenericClient,
) -> Result<impl Iterator<Item = Result<ListPilotsRow, postgres::Error>>, postgres::Error> {
    let query_struct = ListPilots {};
    query_struct.query(client)
}
#[derive(Debug)]
pub struct ListPilots {}
impl ListPilots {
    pub const QUERY: &'static str = r#"-- name: ListPilots :many
SELECT id, name FROM pilots LIMIT 5"#;
}
impl ListPilots {
    pub fn query(
        &self,
        client: &mut impl postgres::GenericClient,
    ) -> Result<impl Iterator<Item = Result<ListPilotsRow, postgres::Error>>, postgres::Error> {
        let rows = client.query(Self::QUERY, &[])?;
        Ok(rows.into_iter().map(|r| ListPilotsRow::from_row(&r)))
    }
    pub fn query_many(
        &self,
        client: &mut impl postgres::GenericClient,
    ) -> Result<Vec<ListPilotsRow>, postgres::Error> {
        let rows = client.query(Self::QUERY, &[])?;
        rows.into_iter()
            .map(|r| ListPilotsRow::from_row(&r))
            .collect()
    }
    pub fn query_raw(
        &self,
        client: &mut impl postgres::GenericClient,
    ) -> Result<impl Iterator<Item = Result<ListPilotsRow, postgres::Error>>, postgres::Error> {
        let rows = client.query(Self::QUERY, &[])?;
        Ok(rows.into_iter().map(|r| ListPilotsRow::from_row(&r)))
    }
}
pub const DELETE_PILOT: &str = r#"-- name: DeletePilot :exec
DELETE FROM pilots WHERE id = $1"#;
pub fn delete_pilot(
    client: &mut impl postgres::GenericClient,
    id: i32,
) -> Result<u64, postgres::Error> {
    let query_struct = DeletePilot { id: id };
    query_struct.execute(client)
}
#[derive(Debug)]
pub struct DeletePilot {
    pub id: i32,
}
impl DeletePilot {
    pub const QUERY: &'static str = r#"-- name: DeletePilot :exec
DELETE FROM pilots WHERE id = $1"#;
}
impl DeletePilot {
    pub fn execute(
        &self,
        client: &mut impl postgres::GenericClient,
    ) -> Result<u64, postgres::Error> {
        client.execute(Self::QUERY, &[&self.id])
    }
}
#[derive(Debug)]
pub struct DeletePilotBuilder<Fields = (())> {
    fields: Fields,
    phantom: std::marker::PhantomData<()>,
}
impl DeletePilot {
    pub fn builder() -> DeletePilotBuilder<(())> {
        DeletePilotBuilder {
            fields: (()),
            phantom: std::marker::PhantomData,
        }
    }
}
impl DeletePilotBuilder<(())> {
    pub fn id(self, id: i32) -> DeletePilotBuilder<(i32)> {
        let (()) = self.fields;
        DeletePilotBuilder {
            fields: (id),
            phantom: std::marker::PhantomData,
        }
    }
}
impl DeletePilotBuilder<(i32)> {
    pub fn build(self) -> DeletePilot {
        let (id) = self.fields;
        DeletePilot { id }
    }
}
